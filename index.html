<!DOCTYPE html>
<html lang="ko">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>ìš°ì„±ê³  ì¹´ë“œ ì„¤ì¹˜</title>

Â  <!-- PWA -->
Â  <link rel="manifest" href="./manifest.json" />
Â  <meta name="theme-color" content="#e0e5ec" />

Â  <!-- iOS PWA -->
Â  <meta name="apple-mobile-web-app-capable" content="yes" />
Â  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
Â  <meta name="apple-mobile-web-app-title" content="ìš°ì„±ê³  ì¹´ë“œ" />
Â  <link rel="apple-touch-icon" href="./icon-192.png" />

Â  <style>
Â  Â  html, body {
Â  Â  Â  height: 100%;
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
Â  Â  }

Â  Â  body {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  background: linear-gradient(-45deg, #e0e5ec, #d1d9e6, #c8d0e7, #b8c6dc);
Â  Â  Â  background-size: 400% 400%;
Â  Â  Â  animation: bg 15s ease infinite;
Â  Â  Â  color: #3d4a5c;
Â  Â  }

Â  Â  @keyframes bg {
Â  Â  Â  0% { background-position: 0% 50%; }
Â  Â  Â  50% { background-position: 100% 50%; }
Â  Â  Â  100% { background-position: 0% 50%; }
Â  Â  }

Â  Â  .wrap { width: min(560px, 92vw); }

Â  Â  .card {
Â  Â  Â  background: #e0e5ec;
Â  Â  Â  border-radius: 26px;
Â  Â  Â  padding: 26px;
Â  Â  Â  box-shadow:
Â  Â  Â  Â  9px 9px 16px rgba(163,177,198,.7),
Â  Â  Â  Â -9px -9px 16px rgba(255,255,255,.9);
Â  Â  }

Â  Â  h1 {
Â  Â  Â  margin: 0 0 8px;
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 1.6rem;
Â  Â  }

Â  Â  .desc {
Â  Â  Â  text-align: center;
Â  Â  Â  color: #5a677b;
Â  Â  Â  margin-bottom: 14px;
Â  Â  Â  line-height: 1.5;
Â  Â  }

Â  Â  .badge {
Â  Â  Â  display: inline-block;
Â  Â  Â  padding: 6px 12px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  background: rgba(0,0,0,.06);
Â  Â  Â  font-size: .9rem;
Â  Â  }

Â  Â  .center { text-align: center; }

Â  Â  .warn {
Â  Â  Â  margin-top: 10px;
Â  Â  Â  font-weight: 800;
Â  Â  Â  color: #d63031;
Â  Â  }

Â  Â  ol {
Â  Â  Â  margin: 12px 0 0 18px;
Â  Â  Â  padding: 0;
Â  Â  Â  line-height: 1.8;
Â  Â  Â  color: #5a677b;
Â  Â  }

Â  Â  li { margin: 8px 0; }

Â  Â  .btns {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  margin-top: 18px;
Â  Â  Â  width: 100%;
Â  Â  }

Â  Â  button {
Â  Â  Â  border: 0;
Â  Â  Â  border-radius: 14px;
Â  Â  Â  padding: 12px 20px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  background: #ffffff80;
Â  Â  Â  color: #2f3a4a;
Â  Â  Â  font-weight: 800;
Â  Â  Â  box-shadow:
Â  Â  Â  Â  6px 6px 12px rgba(163,177,198,.45),
Â  Â  Â  Â -6px -6px 12px rgba(255,255,255,.75);

Â  Â  Â  /* âœ… í…ìŠ¤íŠ¸ ì¤‘ì•™ì •ë ¬ í•µì‹¬ */
Â  Â  Â  display: inline-flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  text-align: center;
Â  Â  Â  min-width: 140px;
Â  Â  }

Â  Â  button:active { transform: translateY(1px); }

Â  Â  iframe {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  border: 0;
Â  Â  Â  display: none;
Â  Â  Â  background: #fff;
Â  Â  Â  -webkit-overflow-scrolling: touch;
Â  Â  }

Â  Â  .hide { display: none !important; }

Â  Â  .small {
Â  Â  Â  margin-top: 14px;
Â  Â  Â  font-size: .9rem;
Â  Â  Â  color: #6b7890;
Â  Â  Â  text-align: center;
Â  Â  Â  line-height: 1.5;
Â  Â  }
Â  </style>

Â  <script>
Â  Â  const APP_URL =
Â  Â  Â  "https://script.google.com/macros/s/AKfycbzLyWl4cHIEmwPDhjMGADoWN1MHa2OLhkVtcJldWDlHzRgyz-Yb9CGNleaiwmrV1-ZvBg/exec";

Â  Â  if ("serviceWorker" in navigator) {
Â  Â  Â  navigator.serviceWorker.register("./sw.js", { scope: "./" }).catch(console.error);
Â  Â  }
Â  </script>
</head>

<body>

<iframe
Â  id="appFrame"
Â  allow="camera; microphone; geolocation; autoplay; fullscreen">
</iframe>

<div id="installUI" class="wrap">
Â  <div class="card">
Â  Â  <h1>ğŸ“± ìš°ì„±ê³  ì¹´ë“œ ì„¤ì¹˜</h1>
Â  Â  <p class="desc" id="topMsg">í™ˆ í™”ë©´ì— ì¶”ê°€í•´ì„œ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.</p>

Â  Â  <div class="center">
Â  Â  Â  <span class="badge" id="envBadge">í™˜ê²½ í™•ì¸ ì¤‘â€¦</span>
Â  Â  Â  <div id="warnMsg" class="warn hide">
Â  Â  Â  Â  ì¹´ì¹´ì˜¤í†¡Â·ë„¤ì´ë²„ ë“± ì•± ì•ˆì—ì„œëŠ” ì„¤ì¹˜ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <ol id="steps"></ol>

Â  Â  <div class="btns">
Â  Â  Â  <button id="installBtn" class="hide" type="button">ì„¤ì¹˜í•˜ê¸°</button>
Â  Â  </div>

Â  Â  <div class="small">
Â  Â  Â  ì„¤ì¹˜ í›„ì—ëŠ” í™ˆ í™”ë©´ì˜ <b>ìš°ì„±ê³  ì¹´ë“œ</b> ì•„ì´ì½˜ìœ¼ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.
Â  Â  </div>
Â  </div>
</div>

<script>
Â  const $ = id => document.getElementById(id);

Â  function showApp() {
Â  Â  $("installUI").classList.add("hide");
Â  Â  const f = $("appFrame");
Â  Â  f.src = APP_URL;
Â  Â  f.style.display = "block";
Â  }

Â  function setSteps(arr) {
Â  Â  $("steps").innerHTML = arr.map(v => `<li>${v}</li>`).join("");
Â  }

Â  document.addEventListener("DOMContentLoaded", () => {

Â  Â  const isStandalone =
Â  Â  Â  window.matchMedia("(display-mode: standalone)").matches ||
Â  Â  Â  window.navigator.standalone === true;

Â  Â  if (isStandalone) {
Â  Â  Â  showApp();
Â  Â  Â  return;
Â  Â  }

Â  Â  const ua = navigator.userAgent.toLowerCase();
Â  Â  const isiOS = /iphone|ipad|ipod/.test(ua);
Â  Â  const isAndroid = /android/.test(ua);

Â  Â  const isInApp =
Â  Â  Â  ua.includes("kakaotalk") ||
Â  Â  Â  (ua.includes("naver") && ua.includes("inapp")) ||
Â  Â  Â  ua.includes("instagram") ||
Â  Â  Â  ua.includes("fbav");

Â  Â  $("envBadge").textContent =
Â  Â  Â  isInApp ? "ì¸ì•± ë¸Œë¼ìš°ì €" : isiOS ? "iOS" : "Android";

Â  Â  if (isInApp) {
Â  Â  Â  $("warnMsg").classList.remove("hide");
Â  Â  Â  $("topMsg").innerHTML =
Â  Â  Â  Â  "ì„¤ì¹˜ë¥¼ ìœ„í•´ <b>ì™¸ë¶€ ë¸Œë¼ìš°ì €</b>ë¡œ ì—´ì–´ì£¼ì„¸ìš”.";

Â  Â  Â  setSteps([
Â  Â  Â  Â  "ìƒë‹¨ ë˜ëŠ” í•˜ë‹¨ì˜ <b>ê³µìœ  / â‹¯ ë©”ë‰´</b>ë¥¼ ëˆ„ë¥´ì„¸ìš”.",
Â  Â  Â  Â  "<b>ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°</b>ë¥¼ ì„ íƒí•˜ì„¸ìš”.",
Â  Â  Â  Â  "ì—´ë¦° ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ì‹œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ì„¸ìš”."
Â  Â  Â  ]);
Â  Â  Â  return;
Â  Â  }

Â  Â  if (isiOS) {
Â  Â  Â  $("topMsg").innerHTML =
Â  Â  Â  Â  "ì•„ì´í°ì€ <b>ê³µìœ  ë©”ë‰´ â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</b>ë¡œ ì„¤ì¹˜í•©ë‹ˆë‹¤.";

Â  Â  Â  setSteps([
Â  Â  Â  Â  "<b>ê³µìœ  ë²„íŠ¼(â¬†ï¸)</b>ì„ ëˆ„ë¥´ì„¸ìš”.",
Â  Â  Â  Â  "<b>í™ˆ í™”ë©´ì— ì¶”ê°€</b>ë¥¼ ì„ íƒí•˜ì„¸ìš”.",
Â  Â  Â  Â  "<b>ì¶”ê°€</b>ë¥¼ ëˆŒëŸ¬ ì„¤ì¹˜ë¥¼ ì™„ë£Œí•˜ì„¸ìš”.",
Â  Â  Â  Â  "â€» ë©”ë‰´ì— ì—†ìœ¼ë©´ <b>Safari</b>ë¡œ ë‹¤ì‹œ ì—´ì–´ì£¼ì„¸ìš”."
Â  Â  Â  ]);
Â  Â  Â  return;
Â  Â  }

Â  Â  // âœ… ì•ˆë“œë¡œì´ë“œ: ì„¤ëª… ì—†ì´ ë²„íŠ¼ë§Œ
Â  Â  $("topMsg").innerHTML = "ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì•±ì„ ì„¤ì¹˜í•˜ì„¸ìš”.";
Â  Â  setSteps([]);

Â  Â  let deferredPrompt = null;
Â  Â  window.addEventListener("beforeinstallprompt", e => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  deferredPrompt = e;
Â  Â  Â  $("installBtn").classList.remove("hide");
Â  Â  });

Â  Â  $("installBtn").addEventListener("click", async () => {
Â  Â  Â  if (!deferredPrompt) return;
Â  Â  Â  deferredPrompt.prompt();
Â  Â  Â  await deferredPrompt.userChoice.catch(()=>{});
Â  Â  Â  deferredPrompt = null;
Â  Â  });
Â  });
</script>

</body>
</html>
